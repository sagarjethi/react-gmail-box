(this["webpackJsonpreact-gmail-api"]=this["webpackJsonpreact-gmail-api"]||[]).push([[0],{65:function(e,t,a){e.exports=a(99)},99:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(23),l=a.n(o),s=a(43),c=a.n(s),i=a(51),u=a(18),g=Object(n.createContext)(),d=a(21),m=a(12),p=function(e,t){switch(t.type){case"SET_MESSAGES":return Object(m.a)(Object(m.a)({},e),{},{messages:[].concat(Object(d.a)(e.messages),[t.payload]),loading:!1});case"SET_MESSAGE":return Object(m.a)(Object(m.a)({},e),{},{message:t.payload});case"SET_CURRENT_LABEL":return Object(m.a)(Object(m.a)({},e),{},{currentLabel:t.payload});case"SET_NEXT_PAGE_TOKEN":return Object(m.a)(Object(m.a)({},e),{},{nextPageToken:t.payload});case"SET_HAS_MORE_MESSAGES":return Object(m.a)(Object(m.a)({},e),{},{hasMoreMessages:t.payload});case"CLEAR_MESSAGES":return Object(m.a)(Object(m.a)({},e),{},{messages:[]});case"SET_LOADING":return Object(m.a)(Object(m.a)({},e),{},{loading:!0});default:return e}},E=function(e){var t=Object(n.useReducer)(p,{messages:[],message:null,currentLabel:"INBOX",nextPageToken:"",hasMoreMessages:!0,isAuthorize:!1,loading:!1}),a=Object(u.a)(t,2),o=a[0],l=a[1],s=function(e){(e.result.messages?e.result.messages:[]).forEach((function(e){window.gapi.client.gmail.users.messages.get({userId:"me",id:e.id}).execute((function(e){l({type:"SET_MESSAGES",payload:e.result})}))}))},c=function(e){return l({type:"SET_NEXT_PAGE_TOKEN",payload:e})},i=function(e){return l({type:"SET_HAS_MORE_MESSAGES",payload:e})},d=function(){return l({type:"CLEAR_MESSAGES"})},m=function(){return l({type:"SET_LOADING"})};return r.a.createElement(g.Provider,{value:{messages:o.messages,message:o.message,currentLabel:o.currentLabel,nextPageToken:o.nextPageToken,hasMoreMessages:o.hasMoreMessages,loading:o.loading,getMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.currentLabel;m(),d();var t=window.gapi.client.gmail.users.messages.list({userId:"me",labelIds:e,maxResults:20});t.execute((function(e){e.result.nextPageToken?(c(e.result.nextPageToken),i(!0)):(c(""),i(!1)),s(e)}))},getMessagesQuery:function(e){m(),d(),window.gapi.client.gmail.users.messages.list({userId:"me",q:e}).execute(s)},getOneMessage:function(e){window.gapi.client.gmail.users.messages.get({userId:"me",id:e}).execute((function(e){console.log(e),l({type:"SET_MESSAGE",payload:e.result})}))},setCurrentLabel:function(e){return l({type:"SET_CURRENT_LABEL",payload:e})},loadMoreMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.currentLabel,t=window.gapi.client.gmail.users.messages.list({userId:"me",labelIds:e,maxResults:20,pageToken:o.nextPageToken});t.execute((function(e){e.result.nextPageToken?(c(e.result.nextPageToken),i(!0)):(c(""),i(!1)),s(e)}))},setLoading:m}},e.children)},f=(a(52),a(56),a(104),a(109),a(112)),b=(a(110),a(59),a(64),a(105),a(4)),h=a(106),S=a(60),w=function(){var e=Object(n.useContext)(g),t=e.getMessages,a=e.getMessagesQuery,o=e.setCurrentLabel,l=Object(n.useState)("INBOX"),s=Object(u.a)(l,2),c=s[0],i=s[1];return r.a.createElement(b.a,{w:"16%",h:"100%",bg:"white",border:"1px",borderColor:"gray.200",borderTopLeftRadius:"md",borderBottomLeftRadius:"md"},r.a.createElement(h.b,null,r.a.createElement(h.a,null,r.a.createElement(f.a,{id:"INBOX",w:"100%",h:"45px",py:2,pl:8,leftIcon:S.a,variantColor:"blue",variant:"INBOX"===c?"solid":"ghost",justifyContent:"flex-start",onClick:function(e){var n=e.target.id;i(n),o(n),t(n),a("Daily Standup")}},"List email")),r.a.createElement(h.a,null),r.a.createElement(h.a,null),r.a.createElement(h.a,null),r.a.createElement(h.a,null),r.a.createElement(h.a,null),r.a.createElement(h.a,null),r.a.createElement(h.a,null)))},y=function(e,t){var a=e.find((function(e){return e.name===t}));return void 0!==a?a.value:void 0},O=a(107),v=a(111),j=a(108),x=a(16),M=a.n(x),T=function(e){var t=e.message,a=e.handleMessageClick,n=y(t.payload.headers,"From").split("<")[0].replace(/['"]+/g,""),o=y(t.payload.headers,"Subject"),l=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(t.snippet.substr(0,75)),s=t.labelIds.indexOf("UNREAD")>-1?"#fff":"#E2E8F0";return r.a.createElement(O.a,{key:t.id,id:t.id,onClick:a,wrap:"no-wrap",justify:"space-around",py:2,bg:s,borderTop:"1px",borderBottom:"1px",borderColor:"gray.300",cursor:"pointer"},r.a.createElement(v.a,{name:n,src:"https://bit.ly/tioluwani-kolawole"}),r.a.createElement(b.a,{w:"80%"},r.a.createElement(j.a,{fontSize:"sm",color:"gray.700",isTruncated:!0},n),r.a.createElement(j.a,{fontSize:"md",fontWeight:"bold",color:"#3182ce",isTruncated:!0},o),r.a.createElement(j.a,{fontSize:"xs",color:"gray.500"},l)))},k=T;T.prototype={message:M.a.object.isRequired,handleMessageClick:M.a.func.isRequired};var A=a(61),C=a(63),_=function(){var e=Object(n.useContext)(g),t=e.messages,a=e.getOneMessage,o=e.hasMoreMessages,l=e.loadMoreMessages,s=function(e){var t=e.currentTarget.getAttribute("id");a(t)};return r.a.createElement(b.a,{overflowY:"auto",id:"scrollableDiv"},r.a.createElement(A.a,{dataLength:t.length,next:l,hasMore:o,loader:r.a.createElement("h4",null,"Loading..."),scrollableTarget:"scrollableDiv"},t.map((function(e,t){return r.a.createElement(k,{key:t,message:e,handleMessageClick:s})}))))},L=function(){return r.a.createElement(b.a,{mt:6,display:"flex",align:"center",justifyContent:"center"},r.a.createElement(C.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"}))},I=function(){var e=Object(n.useContext)(g),t=e.messages,a=e.loading;return r.a.createElement(O.a,{direction:"column",wrap:"no-wrap",w:"80%",h:"100%",bg:"#f1f1f1",color:"black"},!t.length&&a?r.a.createElement(L,null):r.a.createElement(_,null))},R=function(){var e=Object(n.useContext)(g).getMessages;return Object(n.useEffect)((function(){e()}),[]),r.a.createElement(O.a,{h:"100vh",minH:"600px",justify:"space-arround",wrap:"no-wrap",p:"1em",bg:"#e5f4f1",color:"white"},r.a.createElement(w,null),r.a.createElement(I,null))},P=a(62),G=function(e){var t=e.handleAuthClick,a=e.loading;return r.a.createElement(O.a,{h:"100vh",justify:"center",alignItems:"center",bg:"#e5f4f1"},r.a.createElement(f.a,{isLoading:a,leftIcon:P.a,height:"50px",variantColor:"blue",variant:"outline",backgroundColor:"white",onClick:t},"Sign in with Google"))},N=a(10),z=a(113),B=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!0),s=Object(u.a)(l,2),g=s[0],d=s[1];Object(n.useEffect)((function(){Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.load("client:auth2",{callback:function(){console.log("gmail","AIzaSyCi8Qhn3KE7Fvr0mk9PMY3JfirVSymSiTg"),window.gapi.client.setApiKey("AIzaSyCi8Qhn3KE7Fvr0mk9PMY3JfirVSymSiTg"),window.gapi.auth.authorize({client_id:"1051191375244-dto5v0atot8b3f2t125mbs91sqbj90bh.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/gmail.readonly",immediate:!0},m)},onerror:function(){console.log("gapi.client failed to load!"),d(!1)},timeout:5e3,ontimeout:function(){console.log("gapi.client could not load in a timely manner!")}});case 2:case"end":return e.stop()}}),e)})))()}),[]);var m=function(e){e&&!e.error?(console.log("Sign-in successful"),p()):(console.error("handleAuthResult..."),console.error(e),d(!1))},p=function(){return window.gapi.client.load("gmail","v1").then((function(e){console.log("gapi client loaded for API"),o(!0)}),(function(e){console.error("Error loading window.gapi client for API",e)}))};return r.a.createElement(E,null,r.a.createElement(N.a,null,r.a.createElement(z.a,null),a?r.a.createElement(R,null):r.a.createElement(G,{loading:g,handleAuthClick:function(){return d(!0),window.gapi.auth.authorize({client_id:"1051191375244-dto5v0atot8b3f2t125mbs91sqbj90bh.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/gmail.readonly",immediate:!1},m)}})))};l.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.647597cb.chunk.js.map